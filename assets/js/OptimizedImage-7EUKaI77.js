import{j as t}from"./framer-motion-DRVzoh8i.js";import{r as e}from"./react-vendor-DOnlgy6y.js";const s=({src:s,alt:r,className:i="",width:a,height:o,priority:c=!1,placeholderColor:n="#f3f4f6",quality:l=80,objectFit:p="cover",blur:u=!1,lazyload:d=!0,sizes:g,fetchpriority:h="auto",loading:f,decoding:m="async",useWebP:b=!0,caption:x,className2x:y=""})=>{const[j,v]=e.useState(!1),[$,z]=e.useState(!1),w=e.useRef(null);e.useEffect((()=>{if(v(!1),z(!1),!c&&d&&"undefined"!=typeof IntersectionObserver){const t=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting&&w.current){const e=w.current;e.dataset.src&&(e.src=e.dataset.src),e.dataset.srcset&&(e.srcset=e.dataset.srcset),t.unobserve(e)}}))}),{rootMargin:"200px 0px"});return w.current&&t.observe(w.current),()=>{w.current&&t.unobserve(w.current)}}}),[s,c,d]);const I=t=>t?t.startsWith("http")?t:t.startsWith("/public/")?t.slice(7):t.startsWith("/")?t:`/${t}`:"/images/placeholder.jpg",N=I(s),k=f||(c?"eager":"lazy"),W=$?I("/images/placeholder.jpg"):N;return t.jsxs("figure",{className:`image-wrapper ${i}`,style:{position:"relative"},children:[t.jsx("div",{className:"image-background",style:{background:n,position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:j?-1:1,opacity:j?0:1,transition:"opacity 0.3s ease-in-out"}}),u&&!j&&t.jsx("div",{className:"blur-placeholder",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",filter:"blur(20px)",backgroundImage:`url(${N})`,backgroundSize:"cover",backgroundPosition:"center",zIndex:0,opacity:.7}}),t.jsx("img",{ref:w,src:W,alt:r,className:`${i} ${y} ${j?"opacity-100":"opacity-0"}`,width:a,height:o,decoding:m,loading:k,fetchPriority:h,sizes:g,srcSet:(()=>{if(!a||N.startsWith("http")||!N.match(/\.(jpe?g|png|webp)$/i))return;const t=N.split(".").slice(0,-1).join("."),e=N.split(".").pop();return`${t}.${e} 1x, ${t}@2x.${e} 2x`})(),style:{objectFit:p,transition:"opacity 0.3s ease-in-out",position:"relative",zIndex:2},onLoad:()=>{v(!0)},onError:()=>{z(!0)}}),x&&t.jsx("figcaption",{className:"text-center mt-2 text-sm text-gray-500 italic",children:x})]})};export{s as O};
